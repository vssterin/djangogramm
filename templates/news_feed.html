{% extends 'base.html' %}

{% block title %}
     <title>News Feed</title>
{% endblock title %}

{% block content %}
{% for post in posts %}
    <div>
        <div>
            <p>{{post.owner.user.username}}
            <img class="rounded-circle" src="{{post.owner.icon.url}}"/>
            </p>
        </div>
        <h2>{{ post.title }}</h2>
    <br>
        <p>Content: {{ post.content }}</p>
    <br>
    {% for img in post.photo_set.all %}
        {% if img.post.id == post.id%}
            <a href="{{img.image.url}}">
                <img src="{{img.image_thumbnail.url}}"/>
            </a>
        {% endif %}
    {% endfor %}
    <form action="{% url 'like-post' %}" method="POST" class="ui form">
        {% csrf_token %}
        <input type="hidden" name="post_id" value="{{post.id}}">
        {% if main_user not in post.likes.all %}
            <br>
            <button class="btn btn-success" type="submit">Like</button>
        {% else %}
            <br>
            <button class="btn btn-secondary" type="submit">Unlike</button>
        {% endif %}
    </form>
    <p>Created at {{post.created_at}}</p>
    <strong>{{ post.likes.all.count }} Likes</strong>
        <br><strong>Tags:</strong>
     {% for tag in post.tags.all %}
        {{ tag }}
    {% endfor %}
    <hr>
    </div>
    <br>
{% endfor %}
{% endblock content %}